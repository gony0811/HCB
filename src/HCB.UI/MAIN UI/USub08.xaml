<Page x:Class="HCB.UI.USub08"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:HCB.UI"
      mc:Ignorable="d" 
      Title="USub08">

    <Page.Resources>

        <local:DeviceDetailTemplateSelector x:Key="DeviceDetailTemplateSelector">
            <local:DeviceDetailTemplateSelector.MotionTemplate>
                <DataTemplate>
                    <local:MotionDeviceView />
                </DataTemplate>
            </local:DeviceDetailTemplateSelector.MotionTemplate>

        </local:DeviceDetailTemplateSelector>

    </Page.Resources>

    <Grid local:GridHelper.Rows="1*, 3*">
        <GroupBox Header="Device" Foreground="White" FontSize="14">
            <Grid local:GridHelper.Rows="1*, Auto" Grid.ColumnSpan="2" Grid.Row="0">
                <DataGrid 
                    ItemsSource="{Binding DeviceList}"
                    SelectedItem="{Binding SelectedDevice, Mode=TwoWay}"
                    AutoGenerateColumns="False"
                    CanUserAddRows="True"
                    IsReadOnly="True"
                    HeadersVisibility="Column"
                    RowHeaderWidth="0"
                    VirtualizingPanel.IsVirtualizing="True"
                    VirtualizingPanel.VirtualizationMode="Recycling"
                    EnableRowVirtualization="True"
                    ScrollViewer.CanContentScroll="True"
                    PreviewMouseRightButtonDown="DataGrid_PreviewMouseRightButtonDown"
                    Margin="10">

                    <DataGrid.ContextMenu>
                        <ContextMenu 
                            DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                            <MenuItem Header="연결" Command="{Binding ConnectPowerPMacCommand}" />
                            <MenuItem Header="연결해제" Command="{Binding DisconnectCommand}" />
                            <Separator/>
                            <MenuItem Header="수정" Command="{Binding EditCommand}" />
                            <MenuItem Header="삭제" Command="{Binding DeleteCommand}" />
                        </ContextMenu>
                    </DataGrid.ContextMenu>

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="1*" />
                        <DataGridTextColumn Header="Device Type" Binding="{Binding DeviceType}" Width="1*" />
                        <DataGridTextColumn Header="상태" Binding="{Binding IsConnected}" Width="1*" />
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Row="1">
                    <Button Content="디바이스 생성" Command="{Binding DeviceCreateCommand}" Width="100" Height="40"/>
                </StackPanel>
            </Grid>
        </GroupBox>
        <GroupBox Header="추가 정보" Grid.Row="1" Padding="10" Foreground="White" FontSize="14">

            <ContentControl
                Content="{Binding SelectedDetailViewModel}"
                ContentTemplateSelector="{StaticResource DeviceDetailTemplateSelector}"/>
        </GroupBox>
    </Grid>


</Page>
